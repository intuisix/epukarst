{% extends 'system/base.html.twig' %}

{% block title %}
    {{system.name}}
{% endblock %}

{% block content %}
    {# Titre #}
    <h1>
        <span class="badge badge-secondary">
            {{system.code}}
        </span>
        <span class="mx-2">
            {{system.name}}
        </span>
        <small>
            {% if is_granted('ROLE_ADMIN') %}
                <a href="{{path('system_modify', {'code': system.code})}}">
                    <i class="fas fa-edit text-primary"></i>
                </a>
            {% endif %}
        </small>
    </h1>

    {# Description introductive #}
    <p><big>{{system.introduction}}</big></p>

    <dl class="row">
        {# Commune #}
        <dt class="col-3">Commune&nbsp;:</dt>
        <dd class="col-9">{{system.commune}}</dd>
        {# Bassin versant #}
        <dt class="col-3">Bassin versant&nbsp;:</dt>
        <dd class="col-9">{{system.basin}}</dd>
    </dl>

    {# Description détaillée du système #}
    <div>
        {{system.description|raw}}
    </div>

    {# Carousel d'images #}
    {% if system.pictures|length > 0 %}
        <center>
            <div id="systemPicturesCarousel" class="carousel slide mb-3" data-ride="carousel" style="width: 80%">
                <ol class="carousel-indicators">
                    {% for picture in system.pictures %}
                        <li data-target="#systemPicturesCarousel" data-slide-to="{{loop.index0}}" class="{% if loop.first %}active{% endif %}"></li>
                    {% endfor %}
                </ol>
                <div class="carousel-inner">
                    {% for picture in system.pictures %}
                        <div class="carousel-item {% if loop.first %}active{% endif %}">
                            <img src="/{{picture.fileName}}" class="d-block w-100" alt="{{picture.caption}}" style="object-fit: cover; width: 720px; height: 540px">
                            <div class="carousel-caption d-none d-md-block">
                                <h5>{{system.name}}</h5>
                                <p>{{picture.caption}}</p>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <a class="carousel-control-prev" href="#systemPicturesCarousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#systemPicturesCarousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </center>
    {% endif %}

    {# Descriptions des bassins et des stations #}
    {% include 'system/_stations.html.twig' with { 'system': system } %}
{% endblock %}
